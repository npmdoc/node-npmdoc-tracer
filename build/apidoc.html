<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="http://github.com/baryon/tracer"

    >tracer (v0.8.7)</a>
</h1>
<h4>A powerful and customizable logging library for node.js. support color console with timestamp, line number, method name, file name and call stack. you can set transport to file, stream, database(ex: mongodb and clouddb, simpledb). keywords: log, logger, t</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.tracer">module tracer</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.tracer.close">
            function <span class="apidocSignatureSpan">tracer.</span>close
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.tracer.colorConsole">
            function <span class="apidocSignatureSpan">tracer.</span>colorConsole
            <span class="apidocSignatureSpan">(conf)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.tracer.console">
            function <span class="apidocSignatureSpan">tracer.</span>console
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.tracer.dailyfile">
            function <span class="apidocSignatureSpan">tracer.</span>dailyfile
            <span class="apidocSignatureSpan">(conf)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.tracer.getLevel">
            function <span class="apidocSignatureSpan">tracer.</span>getLevel
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.tracer.setLevel">
            function <span class="apidocSignatureSpan">tracer.</span>setLevel
            <span class="apidocSignatureSpan">(level)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">tracer.</span>settings</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">tracer.</span>utils</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.tracer.settings">module tracer.settings</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.tracer.settings.close">
            function <span class="apidocSignatureSpan">tracer.settings.</span>close
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.tracer.settings.getLevel">
            function <span class="apidocSignatureSpan">tracer.settings.</span>getLevel
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.tracer.settings.setLevel">
            function <span class="apidocSignatureSpan">tracer.settings.</span>setLevel
            <span class="apidocSignatureSpan">(level)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">tracer.</span>settings</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.tracer.utils">module tracer.utils</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.tracer.utils.format">
            function <span class="apidocSignatureSpan">tracer.utils.</span>format
            <span class="apidocSignatureSpan">(f)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.tracer.utils.union">
            function <span class="apidocSignatureSpan">tracer.utils.</span>union
            <span class="apidocSignatureSpan">(obj, args)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.tracer" id="apidoc.module.tracer">module tracer</a></h1>


    <h2>
        <a href="#apidoc.element.tracer.close" id="apidoc.element.tracer.close">
        function <span class="apidocSignatureSpan">tracer.</span>close
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">close = function (){
	settings.level = Number.MAX_VALUE;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
setLevel and close methods to dynamically change the log level.
these are global settings, affect all output that are created via tracer

```javascript
var tracer = require(&#x27;tracer&#x27;);
tracer.setLevel(2); //or tracer.setLevel(&#x27;debug&#x27;);
//... ...
tracer.<span class="apidocCodeKeywordSpan">close</span>();

```

notice:
if you set level in initialize, you can&#x27;t change more lower level than the initial level.

```javascript
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.tracer.colorConsole" id="apidoc.element.tracer.colorConsole">
        function <span class="apidocSignatureSpan">tracer.</span>colorConsole
        <span class="apidocSignatureSpan">(conf)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">colorConsole = function (conf) {
	return require(&#x27;./console&#x27;)({
		filters : {
			//log : do nothing
			trace : colors.magenta,
			debug : colors.cyan,
			info : colors.green,
			warn : colors.yellow,
			error : colors.red.bold
		}
	}, conf);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var logger = require(&#x27;tracer&#x27;).console();
```


Color Console

```javascript
var logger = require(&#x27;tracer&#x27;).<span class="apidocCodeKeywordSpan">colorConsole</span>();
```

Set Output Level

```javascript
var logger = require(&#x27;tracer&#x27;).colorConsole({level:&#x27;warn&#x27;});
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.tracer.console" id="apidoc.element.tracer.console">
        function <span class="apidocSignatureSpan">tracer.</span>console
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">console = function () {
	// default config
	var _config = {
		format : &#x22;{{timestamp}} &#x3c;{{title}}&#x3e; {{file}}:{{line}} ({{method}}) {{message}}&#x22;,
		dateformat : &#x22;isoDateTime&#x22;,
		preprocess : function(data) {
		},
		transport : function(data) {
			console.log(data.output);
		},
		filters : [],
		level : &#x27;log&#x27;,
		methods : [ &#x27;log&#x27;, &#x27;trace&#x27;, &#x27;debug&#x27;, &#x27;info&#x27;, &#x27;warn&#x27;, &#x27;error&#x27; ],
		stackIndex : 0,		// get the specified index of stack as file information. It is userful for development package.
		inspectOpt : {
			showHidden : false, //if true then the object&#x27;s non-enumerable properties will be shown too. Defaults to false
			depth : 2 //tells inspect how many times to recurse while formatting the object. This is useful for inspecting large complicated
 objects. Defaults to 2. To make it recurse indefinitely pass null.
		}
	};

	// union user&#x27;s config and default
	_config = utils.union(_config, arguments);

	var _self = {};

	_config.format = Array.isArray(_config.format) ? _config.format
		: [ _config.format ];

	_config.filters = Array.isArray(_config.filters) ? _config.filters
		: [ _config.filters ];

	_config.transport = Array.isArray(_config.transport) ? _config.transport : [_config.transport];

	var fLen = _config.filters.length, lastFilter;
	if (fLen &#x3e; 0)
		if (Object.prototype.toString.call(_config.filters[--fLen]) != &#x27;[object Function]&#x27;) {
			lastFilter = _config.filters[fLen];
			_config.filters = _config.filters.slice(0, fLen);
		}

	if (typeof (_config.level) == &#x27;string&#x27;)
		_config.level = _config.methods.indexOf(_config.level);

	_config.methods.forEach(function(title, i) {
		if (i &#x3c; _config.level)
			_self[title] = noop;
		else {
			var format = _config.format[0];
			if (_config.format.length === 2 &#x26;&#x26; _config.format[1][title])
				format = _config.format[1][title];
			var needstack = /{{(method|path|line|pos|file)}}/i.test(format);

			var filters;
			if (lastFilter &#x26;&#x26; lastFilter[title])
				filters = Array.isArray(lastFilter[title]) ? lastFilter[title]
					: [ lastFilter[title] ];
			else
				filters = _config.filters;

			// interface
			_self[title] = function() {
				return logMain(_config, i, title, format, filters, needstack, arguments);
			};
		}
	});

	return _self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Usage
-----
Add to your code:

Simple Console

```javascript
var logger = require(&#x27;tracer&#x27;).<span class="apidocCodeKeywordSpan">console</span>();
```


Color Console

```javascript
var logger = require(&#x27;tracer&#x27;).colorConsole();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.tracer.dailyfile" id="apidoc.element.tracer.dailyfile">
        function <span class="apidocSignatureSpan">tracer.</span>dailyfile
        <span class="apidocSignatureSpan">(conf)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dailyfile = function (conf) {
    var _conf = {
        root: &#x27;.&#x27;,
        logPathFormat: &#x27;{{root}}/{{prefix}}.{{date}}.log&#x27;,
        splitFormat: &#x27;yyyymmdd&#x27;,
        allLogsFileName: false,
        maxLogFiles: 10
    };

    _conf = utils.union(_conf, [conf]);

    function LogFile(prefix, date) {
        this.date = date;
        this.path = tinytim.tim(_conf.logPathFormat, {root: _conf.root, prefix: prefix, date: date});
        spawnSync(&#x27;mkdir&#x27;, [&#x27;-p&#x27;, _conf.root]);
        this.stream = fs.createWriteStream(this.path, {
            flags: &#x22;a&#x22;,
            encoding: &#x22;utf8&#x22;,
            mode: parseInt(&#x27;0644&#x27;, 8)
            // When engines node &#x3e;= 4.0.0, following notation will be better:
            //mode: 0o644
        });
    }

    LogFile.prototype.write = function (str) {
        this.stream.write(str + &#x22;\n&#x22;);
    };

    LogFile.prototype.destroy = function () {
        if (this.stream) {
            this.stream.end();
            this.stream.destroySoon();
            this.stream = null;
        }
    };

    var _logMap = {};

    function _push2File(str, title) {
        var logFile = _logMap[title], now = dateFormat(new Date(), _conf.splitFormat);
        if (logFile &#x26;&#x26; logFile.date != now) {
            logFile.destroy();
            logFile = null;
        }
        if (!logFile) {
            logFile = _logMap[title] = new LogFile(title, now);
            spawn(&#x27;find&#x27;, [_conf.root, &#x27;-type&#x27;, &#x27;f&#x27;, &#x27;-name&#x27;, &#x27;*.log&#x27;, &#x27;-mtime&#x27;, &#x27;+&#x27; + _conf.maxLogFiles, &#x27;-exec&#x27;, &#x27;rm&#x27;, &#x27;{}&#x27;, &#x27;\;&#x27;]);
        }
        logFile.write(str);
        if (_conf.allLogsFileName) {
            var allLogFile = _logMap.allLogFile, now = dateFormat(new Date(), _conf.splitFormat);
            if (allLogFile &#x26;&#x26; allLogFile.date != now) {
                allLogFile.destroy();
                allLogFile = null;
            }
            if (!allLogFile) {
                allLogFile = _logMap.allLogFile = new LogFile(_conf.allLogsFileName, now);
                spawn(&#x27;find&#x27;, [&#x27;./&#x27;, &#x27;-type&#x27;, &#x27;f&#x27;, &#x27;-name&#x27;, &#x27;*.log&#x27;, &#x27;-mtime&#x27;, &#x27;+&#x27; + _conf.maxLogFiles, &#x27;-exec&#x27;, &#x27;rm&#x27;, &#x27;{}&#x27;, &#x27;\;&#x27;]);
            }
            allLogFile.write(str);
        }
    }

    function dailyFileTransport(data) {
        _push2File(data.output, data.title);
    }

    if (conf.transport) {
        conf.transport = Array.isArray(conf.transport) ? conf.transport : [conf.transport];
        conf.transport.push(dailyFileTransport)
    } else {
        conf.transport = [dailyFileTransport];
    }
    return require(&#x27;./console&#x27;)(conf);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
logger.info(&#x27;hello %s %d&#x27;,  &#x27;world&#x27;, 123, {foo:&#x27;bar&#x27;});
logger.warn(&#x27;hello %s %d %j&#x27;, &#x27;world&#x27;, 123, {foo:&#x27;bar&#x27;});
logger.error(&#x27;hello %s %d %j&#x27;, &#x27;world&#x27;, 123, {foo:&#x27;bar&#x27;}, [1, 2, 3, 4], Object);
```

### Daily Log
```javascript
var logger = require(&#x27;tracer&#x27;).<span class="apidocCodeKeywordSpan">dailyfile</span>({root:&#x27;.&#x27;, maxLogFiles:
10, allLogsFileName: &#x27;myAppName&#x27;});

logger.log(&#x27;hello&#x27;);
logger.trace(&#x27;hello&#x27;, &#x27;world&#x27;);
logger.debug(&#x27;hello %s&#x27;,  &#x27;world&#x27;, 123);
logger.info(&#x27;hello %s %d&#x27;,  &#x27;world&#x27;, 123, {foo:&#x27;bar&#x27;});
logger.warn(&#x27;hello %s %d %j&#x27;, &#x27;world&#x27;, 123, {foo:&#x27;bar&#x27;});
logger.error(&#x27;hello %s %d %j&#x27;, &#x27;world&#x27;, 123, {foo:&#x27;bar&#x27;}, [1, 2, 3, 4], Object);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.tracer.getLevel" id="apidoc.element.tracer.getLevel">
        function <span class="apidocSignatureSpan">tracer.</span>getLevel
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getLevel = function (){
	return settings.level;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.tracer.setLevel" id="apidoc.element.tracer.setLevel">
        function <span class="apidocSignatureSpan">tracer.</span>setLevel
        <span class="apidocSignatureSpan">(level)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setLevel = function (level){
	settings.level = level;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...


setLevel and close methods to dynamically change the log level.
these are global settings, affect all output that are created via tracer

```javascript
var tracer = require(&#x27;tracer&#x27;);
tracer.<span class="apidocCodeKeywordSpan">setLevel</span>(2); //or tracer.setLevel(&#x27;debug&#x27;);
//... ...
tracer.close();

```

notice:
if you set level in initialize, you can&#x27;t change more lower level than the initial level.
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.tracer.settings" id="apidoc.module.tracer.settings">module tracer.settings</a></h1>


    <h2>
        <a href="#apidoc.element.tracer.settings.close" id="apidoc.element.tracer.settings.close">
        function <span class="apidocSignatureSpan">tracer.settings.</span>close
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">close = function (){
	settings.level = Number.MAX_VALUE;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
setLevel and close methods to dynamically change the log level.
these are global settings, affect all output that are created via tracer

```javascript
var tracer = require(&#x27;tracer&#x27;);
tracer.setLevel(2); //or tracer.setLevel(&#x27;debug&#x27;);
//... ...
tracer.<span class="apidocCodeKeywordSpan">close</span>();

```

notice:
if you set level in initialize, you can&#x27;t change more lower level than the initial level.

```javascript
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.tracer.settings.getLevel" id="apidoc.element.tracer.settings.getLevel">
        function <span class="apidocSignatureSpan">tracer.settings.</span>getLevel
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getLevel = function (){
	return settings.level;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.tracer.settings.setLevel" id="apidoc.element.tracer.settings.setLevel">
        function <span class="apidocSignatureSpan">tracer.settings.</span>setLevel
        <span class="apidocSignatureSpan">(level)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setLevel = function (level){
	settings.level = level;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...


setLevel and close methods to dynamically change the log level.
these are global settings, affect all output that are created via tracer

```javascript
var tracer = require(&#x27;tracer&#x27;);
tracer.<span class="apidocCodeKeywordSpan">setLevel</span>(2); //or tracer.setLevel(&#x27;debug&#x27;);
//... ...
tracer.close();

```

notice:
if you set level in initialize, you can&#x27;t change more lower level than the initial level.
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.tracer.utils" id="apidoc.module.tracer.utils">module tracer.utils</a></h1>


    <h2>
        <a href="#apidoc.element.tracer.utils.format" id="apidoc.element.tracer.utils.format">
        function <span class="apidocSignatureSpan">tracer.utils.</span>format
        <span class="apidocSignatureSpan">(f)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">format = function (f) {
	var inspectOpt = this.inspectOpt;
	var args = arguments;
	var i = 0;

	if (typeof f !== &#x27;string&#x27;) {
		var objects = [];
		for (; i &#x3c; args.length; i++) {
			objects.push(util.inspect(args[i], inspectOpt));
		}
		return objects.join(&#x27; &#x27;);
	}

	i = 1;
	var str = String(f).replace(formatRegExp, function(x) {
		switch (x) {
		case &#x27;%s&#x27;:
			return String(args[i++]);
		case &#x27;%d&#x27;:
			return Number(args[i++]);
		case &#x27;%j&#x27;:
			try {
			    if (args[i] instanceof Error) {
				return JSON.stringify(args[i++], [&#x27;message&#x27;, &#x27;stack&#x27;, &#x27;type&#x27;, &#x27;name&#x27;]);
        		    } else {
            			return JSON.stringify(args[i++]);
        		    }
			} catch(e) {
				return &#x27;[Circular]&#x27;;
			}
		case &#x27;%t&#x27;:
			return util.inspect(args[i++], inspectOpt);
		default:
			return x;
		}
	});
	for ( var len = args.length, x = args[i]; i &#x3c; len; x = args[++i]) {
		if (x === null || typeof x !== &#x27;object&#x27;) {
			str += &#x27; &#x27; + x;
		} else {
			str += &#x27; &#x27; + util.inspect(x, inspectOpt);
		}
	}
	return str;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.tracer.utils.union" id="apidoc.element.tracer.utils.union">
        function <span class="apidocSignatureSpan">tracer.utils.</span>union
        <span class="apidocSignatureSpan">(obj, args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">union = function (obj, args) {
	for (var i = 0, len = args.length; i &#x3c; len; i += 1) {
		var source = args[i];
		for ( var prop in source) {
			obj[prop] = source[prop];
		}
	}
	return obj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		inspectOpt : {
			showHidden : false, //if true then the object&#x27;s non-enumerable properties will be shown too. Defaults to false
			depth : 2 //tells inspect how many times to recurse while formatting the object. This is useful for inspecting large complicated
 objects. Defaults to 2. To make it recurse indefinitely pass null.
		}
	};

	// union user&#x27;s config and default
	_config = utils.<span class="apidocCodeKeywordSpan">union</span>(_config, arguments);

	var _self = {};

	_config.format = Array.isArray(_config.format) ? _config.format
		: [ _config.format ];

	_config.filters = Array.isArray(_config.filters) ? _config.filters
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
